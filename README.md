📊 Quant Stock Picker 專案說明

Quant Stock Picker 是一個以 股票量化選股（Quantitative Stock Picking） 為核心的前端單頁式應用（SPA）。
使用者可從 .csv 格式的股票資料中進行篩選、瀏覽、權重分配與最終投組提交。
本系統以 React + TypeScript 開發，搭配 Material UI 打造現代化介面，
並使用 Vite 作為開發與建構工具，提供快速的前端開發體驗。

--------------------------------------------------------------------------
💡 功能概覽

| 功能階段              | 說明                                                                |
| :---------------- | :---------------------------------------------------------------- |
| **Browse（瀏覽階段）**  | 顯示完整股票清單，使用者可依據「代號、產業、國家、PE 範圍」等條件進行搜尋與篩選，並可選擇排序依據（綜合、PE、殖利率、市值）。 |
| **Detail（詳細資訊）**  | 顯示個股詳細資訊，包含其產業、國家、市值與綜合評分，並可「加入暫存」以配置投資權重。                        |
| **Stage（暫存階段）**   | 顯示目前已暫存的股票列表，允許使用者調整各股票的權重，並可預覽組合的加權結果。                           |
| **Final（最終提交階段）** | 匯出最終投資組合為 `portfolio.csv`，並將結果同步保存至 `finalSubmission` 狀態中。        |

--------------------------------------------------------------------------
🧠 系統設計特色

- 量化決策輔助：以 z-score 標準化方式綜合多項指標（PE、殖利率、市值）計算「綜合分數」。
- 多維度篩選：提供產業、國家、PE 範圍與自訂排序功能。
- 互動式權重配置：可於暫存清單中動態調整比重。
- 即時回饋介面：所有變更皆即時反映於畫面，不需重新整理。
- CSV 相容輸出：最終結果可匯出為通用 .csv 格式，便於分析與整合。

--------------------------------------------------------------------------
⚙️ 安裝與執行
安裝、啟動開發伺服器
```bash
npm install
npm run dev
```

執行後可於瀏覽器開啟 http://localhost:5173 進行測試。

--------------------------------------------------------------------------
📁 資料來源與設定

- 原始資料位置
股票清單檔案： src/public/data/stocks.csv，

- 載入方式：
系統支援兩種資料載入機制：
Vite 直接匯入 (?raw) — 在編譯階段以模組形式載入 CSV。
Fetch 請求載入 — 在執行階段從 /data/ 路徑以 HTTP 方式取得。
若主要路徑讀取失敗，系統會自動嘗試多路徑讀取策略：
```bash
/data/* → /public/data/* → /src/public/data/*
```

- 資料處理邏輯：
資料載入後，會經過：
- 數值型別轉換（如 PE, PB, ROE 等欄位）
- 欄位標準化（z-score 正規化）
- 綜合評分（enrichScores() 根據自訂權重計算）

--------------------------------------------------------------------------
🧩 系統架構與技術棧

| 模組分類             | 技術 / 檔案                                                 | 功能描述                                                 |
| :--------------- | :------------------------------------------------------ | :--------------------------------------------------- |
| **UI Framework** | Material UI                                             | 提供元件庫與響應式設計                                          |
| **Routing**      | React Router DOM                                        | 處理頁面導覽與路由切換                                          |
| **狀態管理**         | `context/AppStateContext.tsx`                           | 全域管理 `items`、`filters`、`stage`、`finalSubmission` 等狀態 |
| **資料層**          | `hooks/useCsvData.ts`                                   | 控制 CSV 載入、轉換與 `enrichScores` 處理                      |
| **搜尋與篩選模組**      | `components/FilterBar.tsx`                              | 提供搜尋框、條件篩選與排序功能                                      |
| **評分模組**         | `utils/scoring.ts`                                      | 實作 `z-score` 標準化與綜合評分邏輯                              |
| **主要頁面**         | `pages/Browse.tsx`、`Detail.tsx`、`Stage.tsx`、`Final.tsx` | 分別對應四個互動階段的功能                                        |


--------------------------------------------------------------------------
🧠 功能與操作流程

1️⃣ Browse（瀏覽階段）
顯示所有股票清單與基本財務指標。
提供搜尋、排序、條件篩選（如 PE、ROE、股價波動度等）。
點擊任一股票可進入詳細資訊頁。

2️⃣ Detail（詳情頁）
顯示個股的完整數據與綜合分數。
提供「加入暫存」功能，可設定預計配置權重（weight）。

3️⃣ Stage（暫存階段）
顯示使用者暫時挑選的個股清單與對應權重。
可調整配置比例、刪除項目或重新排序。
資料以陣列形式儲存在全域狀態中：
```
stage = [{ symbol: "TSMC", weight: 0.25 }, { symbol: "AAPL", weight: 0.15 }]
```

4️⃣ Final（最終提交階段）
確認最終選股結果並進行輸出。
會自動生成 portfolio.csv 並記錄提交內容於 finalSubmission 狀態中。
可重新導出或回到前一階段進行修改。

--------------------------------------------------------------------------
🗃️ 狀態流說明

| 狀態名稱            | 說明                                    |
| ----------------- | ---------------------------------------|
| `items`           | 全部股票資料（載入並 enrichScores 後的清單）  |
| `filters`         | 篩選與排序條件（例如依產業別、報酬率排序）       |
| `stage`           | 暫存區股票陣列（symbol + weight）          |
| `finalSubmission` | 使用者送出後的最終結果                      |

Context 會提供各頁面以 Hook (useContext(AppStateContext)) 的形式讀取與更新。

--------------------------------------------------------------------------
📊 決策輔助模組說明

- FilterBar.tsx
負責顯示搜尋列、篩選按鈕、排序下拉選單。
與 Context 整合後能即時更新畫面顯示。

- scoring.ts
提供 calcZScore() 與 calcCompositeScore() 兩個核心函式。
透過 z-score 對不同財務指標進行標準化後，依加權比例加總成最終綜合評分。
支援自訂權重設定，方便延伸為多策略版本。

--------------------------------------------------------------------------


💾 結果輸出格式

暫存區 (Staging)：
陣列格式：
```
[{ symbol: "TSMC", weight: 0.3 }, { symbol: "AAPL", weight: 0.2 }]
```

最終提交 (Final)：
最終提交（Final）階段會輸出 portfolio.csv，並將送出記錄存入、同時更新 finalSubmission。
```
symbol,weight,score
TSMC,0.3,0.87
AAPL,0.2,0.82
```

--------------------------------------------------------------------------
🧾 專案結構摘要
```
src/
├── components/
│   ├── FilterBar.tsx
│   └── StockCard.tsx
├── context/
│   └── AppStateContext.tsx
├── hooks/
│   └── useCsvData.ts
├── pages/
│   ├── Browse.tsx
│   ├── Detail.tsx
│   ├── Stage.tsx
│   └── Final.tsx
├── utils/
│   └── scoring.ts
└── public/
    └── data/
        └── stocks.csv
```


--------------------------------------------------------------------------
🧩 技術要點
- React + TypeScript 開發，具良好型別檢查與模組化結構。
- 全端無伺服器依賴，純前端可部署至 GitHub Pages 或 Netlify。
- Context-based 狀態管理，取代 Redux，輕量又具可維護性。
- 支援 CSV 資料自動轉換與標準化。
- Material UI 提供一致的視覺設計與交互體驗。

--------------------------------------------------------------------------
📈 未來改進方向
- 支援多權重策略（Momentum / Value / Growth）
- 新增用戶偏好儲存（LocalStorage）
- 增加圖表視覺化（ECharts / Chart.js）
- API 實時股價更新（整合 Yahoo Finance API）